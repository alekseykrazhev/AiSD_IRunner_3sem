Когда поступают новые запросы, распределяем их так, что первые count (count = число запросов Получить, которые есть на момент добавления элемента) наименьших элементов (в запросах Добавить) оказывались в max-heap, и тогда нужный нам элемент на момент запроса Получить будет в max-heap.top()